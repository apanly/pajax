<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  
    <title>Asynch Test for Pajax</title>
    <link rel="stylesheet" type="text/css" href="jsunit/css/jsUnitStyle.css">
	<script language="JavaScript" type="text/javascript" src="jsunit/app/jsUnitCore.js"></script>
	<script language="JavaScript" type="text/javascript" src="../pajax/pajax_library.js"></script>
	<script language="JavaScript" type="text/javascript" src="../pajax/pajax_import.php?TestTypes"></script>
	<script language="JavaScript">

		var cb = false;

    function pause(numberMillis) {
        var now = new Date();
        var exitTime = now.getTime() + numberMillis;
        while (true) {
            now = new Date();
            if (now.getTime() > exitTime)
                return;
        }
    }		
		function testAsynch() {
			listener = new TestTypesListener();
	
			listener.onGetparam = function(res) {
				cb = true;
				assert("Should get true response", res);
			}
			
			obj = new TestTypes(listener);			
			cb = false;
			assert("Expecting send asynch to be true", obj.getparam(true));		
			pause(500);
		}

		function testAsynch2() {
			assert("Callback should be called", cb);			
		}
		
	</script>
</head>
<body>
    <h1>Test for Pajax asynch</h1>
    <p>This page contains tests for testing Pajax asynchronous support.</p>
</body>
</html>