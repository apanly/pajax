<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Pajax by georges</title>
    
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Pajax</h1>
        <p>Remote (a)synchronous PHP objects in JavaScript</p>
        <p class="view"><a href="https://github.com/georges/pajax">View the Project on GitHub <small>georges/pajax</small></a></p>
        <ul>
          <li><a href="https://github.com/georges/pajax/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/georges/pajax/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/georges/pajax">Fork On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h2>What is this?</h2>

<p>This is a library to allow simple PHP objects to be made remotable in JavaScript, using XMLHttpRequest.</p>

<h2>Introducing JSON</h2>

<p>AJAX technique usually implies using XML as a data exchange format. While suitable as a format to marshal parameters back and forth, there is another format that is much more suitable for JavaScript. <a href="http://www.crockford.com/JSON/index.html">JSON</a> (JavaScript Object Notation) is an alternate markup format that can be used to describe structured text data. It is based on the internal format used to store JavaScript Objects.</p>

<h2>Object Request Broker pattern</h2>

<p>CORBA and RMI are two well known instances of the ORB (Object Request Broker) pattern. In this pattern, objects in a distributed environment need to call methods of remote objects. For remote call to work, many details must be just right. This pattern covers the aspect of building an infrastructure that hides all the complexity from the caller standpoint.</p>

<p><img src="http://cdn.auberger.com/images/objectrequestbrokerpattern.png" alt="Object Request Broker Design Pattern"></p>

<h2>Of caller, callee, stub and dispatcher</h2>

<p>PAJAX is just such a framework that hides the complexity involved in calling a method on a remote object. In this example, we're going to create a basic calculator in JavaScript where the operations are performed in a PHP class. Let's start with the PHP class for our calculator:</p>

<div class="highlight">
<pre><span class="cp">&lt;?</span>
 <span class="k">class</span> <span class="nc">Calculator</span> <span class="k">extends</span> <span class="nx">PajaxRemote</span> <span class="p">{</span>
   <span class="k">function</span> <span class="nf">add</span><span class="p">(</span><span class="nv">$x</span><span class="p">,</span> <span class="nv">$y</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nv">$x</span> <span class="o">+</span> <span class="nv">$y</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="k">function</span> <span class="nf">multiply</span><span class="p">(</span><span class="nv">$x</span><span class="p">,</span> <span class="nv">$y</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nv">$x</span> <span class="o">*</span> <span class="nv">$y</span><span class="p">;</span>
   <span class="p">}</span>

    <span class="o">...</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre>
</div>


<p>The class only needs to extend the base class PajaxRemote. This marker class is used to indicate that this class is remotable and thus, a stub can be created and an instance of this class can be created remotely.</p>

<p>In order to access this class within JavaScript, a stub class is required. It can be generated by including the following in the HTML file containing the JavaScript</p>

<div class="highlight">
<pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"pajax_import.php?Calculator"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/script&gt;</span>
</pre>
</div>


<p>The resulting stub class can then be used like a regular JavaScript object. The framework automatically takes care of marshaling the parameters and performs the remote call.</p>

<div class="highlight">
<pre><span class="kd">var</span> <span class="nx">calculator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Calculator</span><span class="p">();</span>
<span class="nx">result</span> <span class="o">=</span> <span class="nx">calculator</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</pre>
</div>


<p>By default, the calls are performed synchronously. In most cases, it is not suitable to have the caller blocked while invoking methods on an object that lives across the network. This typically leads to a frozen UI and an overall unresponsive application.</p>

<h2>Asynchronous Call</h2>

<p>When you invoke a method asynchronously, the call returns immediately. Most usefull methods will return some value, so you need a way to retrieve the returned value asynchronously. This is done by specifying a listener companion object for each remote object. Each method in the remote object has a corresponding method on the listener, prefixed with "on", that is automatically invoked upon completion of the remote call. Here is a diagram of the calling sequence:</p>

<p><img src="http://cdn.auberger.com/images/pajaxasynccall.png" alt="Pajax asynchronous call sequence diagram"></p>

<div class="highlight">
<pre><span class="kd">var</span> <span class="nx">listener</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CalculatorListener</span><span class="p">();</span>
<span class="nx">listener</span><span class="p">.</span><span class="nx">onAdd</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ret</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s2">"Result:"</span> <span class="o">+</span> <span class="nx">ret</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">calculator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Calculator</span><span class="p">(</span><span class="nx">listener</span><span class="p">);</span>
<span class="c1">// Method will return immediatly</span>
<span class="nx">result</span> <span class="o">=</span> <span class="nx">calculator</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</pre>
</div>


<h2>Remote Object Binding</h2>

<p>If your php object contains instance variables, you'd like to retain the same object between calls. PAJAX maintains a relationship with each instances of client object and their remote counterpart. It will lazily create a new object on the first call and bind subsequent calls to that particular object.</p>

<h2>Demo</h2>

<p>Try a <a href="http://demo.auberger.com/pajax/">live demo</a> of examples using PAJAX.</p>

<h2>Documentation</h2>

<p><a href="http://demo.auberger.com/pajax/doc/">PAJAX documentation</a></p>

<h2>Get the source</h2>

<p>Get or fork <a href="https://github.com/georges/pajax">pajax</a> on Github.</p>

<h2>License</h2>

<p>PAJAX is licensed under the <a href="http://www.opensource.org/licenses/mit-license.php">MIT license</a></p>

<blockquote>
<p>Fantastic library.</p>

<p>Was just testing out your pajax engine .. and boy is it nice and clean.</p>

<p>... I think design vise you library is the best PHP version of AJAX for now.</p>

<p>Out of the many tool kits that I reviewed, many provided only part of the functionality that was needed.  Many others, had requirements beyond what was feasible.  Out of all that were reviewed, your Pajax tool kit was the only one that passed all the requirements. In addition, the code that makes up the toolkit is cleanly designed and is easily integrated into existing projects without a major rewrite of the code base.</p>

<p>I've started learning Ajax (and all that comes with it) recently, and have discovered your library - it's simply amazing. I love it.</p>

<p>... gr8 work on the toolkit.</p>
</blockquote>

      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/georges">georges</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-1961119-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>